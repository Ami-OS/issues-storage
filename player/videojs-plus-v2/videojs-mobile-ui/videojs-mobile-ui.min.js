/**
 * videojs-mobile-ui
 * @version 0.4.1
 * @copyright 2021 mister-ben <git@misterben.me>
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/window")):"function"==typeof define&&define.amd?define(["video.js","global/window"],t):e.videojsMobileUi=t(e.videojs,e.window)}(this,function(a,s){"use strict";a=a&&a.hasOwnProperty("default")?a.default:a,s=s&&s.hasOwnProperty("default")?s.default:s;var o,i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},e=a.getComponent("Component"),t=a.dom||a,n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,o=e),l.prototype.createEl=function(){return t.createEl("div",{className:"vjs-touch-overlay",tabIndex:-1})},l.prototype.handleTap=function(e){var t=this;e.target===this.el_&&(e.preventDefault(),this.firstTapCaptured?(this.firstTapCaptured=!1,this.timeout&&s.clearTimeout(this.timeout),this.handleDoubleTap(e)):(this.firstTapCaptured=!0,this.timeout=s.setTimeout(function(){t.firstTapCaptured=!1,t.handleSingleTap(e)},this.tapTimeout)))},l.prototype.handleSingleTap=function(e){this.removeClass("skip"),this.toggleClass("show-play-toggle")},l.prototype.handleDoubleTap=function(e){var t=this,n=this.el_.getBoundingClientRect(),e=e.changedTouches[0].clientX-n.left;if(e<.4*n.width)this.player_.currentTime(Math.max(0,this.player_.currentTime()-this.seekSeconds)),this.addClass("reverse");else{if(!(e>n.width-.4*n.width))return;this.player_.currentTime(Math.min(this.player_.duration(),this.player_.currentTime()+this.seekSeconds)),this.removeClass("reverse")}this.removeClass("show-play-toggle"),this.removeClass("skip"),s.requestAnimationFrame(function(){t.addClass("skip")})},l.prototype.enable=function(){this.firstTapCaptured=!1,this.on("touchend",this.handleTap)},l.prototype.disable=function(){this.off("touchend",this.handleTap)},l);function l(e,t){i(this,l);var n=r(this,o.call(this,e,t));return n.seekSeconds=t.seekSeconds,n.tapTimeout=t.tapTimeout,n.addChild("playToggle",{}),e.on(["playing","userinactive"],function(e){n.removeClass("show-play-toggle")}),0===n.player_.options_.inactivityTimeout&&(n.player_.options_.inactivityTimeout=5e3),n.enable(),n}e.registerComponent("TouchOverlay",n);function u(t,n){t.addClass("vjs-mobile-ui"),!n.touchControls.disableOnEnd&&"function"!=typeof t.endscreen||t.addClass("vjs-mobile-ui-disable-end"),n.fullscreen.iOS&&a.browser.IS_IOS&&9<a.browser.IOS_VERSION&&!t.el_.ownerDocument.querySelector(".bc-iframe")&&(t.tech_.el_.setAttribute("playsinline","playsinline"),t.tech_.supportsFullScreen=function(){return!1});var e=void 0,o=a.VERSION.split("."),i=parseInt(o[0],10),o=parseInt(o[1],10),e=i<7||7===i&&o<7?Array.prototype.indexOf.call(t.el_.children,t.getChild("ControlBar").el_):t.children_.indexOf(t.getChild("ControlBar"));t.addChild("TouchOverlay",n.touchControls,e);var r=!1,e=function(){var e="number"==typeof s.orientation||p&&p.orientation&&p.orientation.angle?s.orientation:(a.log("angle unknown"),0);90!==e&&270!==e&&-90!==e||!n.enterOnRotate||!1===t.paused()&&(t.requestFullscreen(),n.fullscreen.lockOnRotate&&p.orientation&&p.orientation.lock&&p.orientation.lock("landscape").then(function(){r=!0}).catch(function(){a.log("orientation lock not allowed")})),0!==e&&180!==e||!n.exitOnRotate||t.isFullscreen()&&t.exitFullscreen()};a.browser.IS_IOS?s.addEventListener("orientationchange",e):p.orientation&&(p.orientation.onchange=e),t.on("ended",function(e){!0===r&&(p.orientation.unlock(),r=!1)})}var c={fullscreen:{enterOnRotate:!0,exitOnRotate:!0,lockOnRotate:!0,iOS:!1},touchControls:{seekSeconds:10,tapTimeout:300,disableOnEnd:!1}},p=s.screen,e=a.registerPlugin||a.plugin,n=function(e){var t=this;(e.forceForTesting||a.browser.IS_ANDROID||a.browser.IS_IOS)&&this.ready(function(){u(t,a.mergeOptions(c,e))})};return e("mobileUi",n),n.VERSION="0.4.1",n});